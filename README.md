# 지하철 미션 - API 테스트와 문서 자동화

## **1단계 - 회원 관리 기능**

### **어떤 방식으로 상태를 관리할 것인가?**

- Bearer
- 선정한 뒤에는, 이외의 Interceptor 코드 삭제

### **인수 테스트 작성**

- 회원 가입(생성)
- 로그인(조회)
- 회원정보 변경(수정)
- 회원탈퇴(삭제)
- 결론적으로, CRUD 기능 모두 구현할 필요가 있음
- Mock Controller를 통한 테스트 구현

### **단위 테스트 작성**

- 멤버 컨트롤러(컨트롤러)에 대한 테스트 코드 구현
- 멤버 서비스(서비스)에 대한 테스트 코드 구현
- 멤버 클래스(도메인)에 대한 테스트 코드 구현
- Mock Controller 대신 실제 컨트롤러-서비스-도메인을 통해 테스트 코드 통과

### **문서화 테스트 코드 작성**

- 컨트롤러에 대하여, Mock 테스트 작성
- 테스트 코드를 통해 문서 자동화 수행

### **프론트엔드 연동**

- 이벤트 리스너 및 api 코드 확인
- 잘못된 입력에 대한 검증 수행
    - 이메일 주소가 잘못되었을 경우(필터 활용)
    - ID, PW 등이 잘못되었을 경우
    - 패스워드 항목과 패스워드-확인 항목이 일치하는지 확인
- 쿠키를 통해 JWT 관리

문제 : 우리는 회원 관리 컨트롤러/서비스/도메인 로직을 짰음
그러나, 로그인 로직은 돌아갈까?
LoginMemberController도 있음
 - 예의 문서화도 해줘야됨
 - 돌아가는지 확인해야됨

### **사이드 케이스 관리**

- 예외에 대한 테스트 코드 추가
- 잘못된 입력에 대한 검증
    - 프론트엔드에서 검증했던 내용을 재검증
    - 로그인에 실패할 경우(서버/DB/세션 데이터와 불일치)
    - 세션 ID, 데이터가 불일치할 경우

- 커스텀 예외 클래스 구현
- 예외를 프론트에 전달, alert 발생
    - 예외 메세지를 직접 전달하는 대신, 예외 코드를 전달하자!
    - 다국어화에 대한 이슈도 고려해 보자!!

---

## **2단계 - 즐겨찾기 기능**

### **인수 테스트 작성**

- 즐겨찾기 추가(생성)
    - 즐겨찾기 등록 시 별 표시가 바뀌는지 확인
- 유저의 즐겨찾기 목록 페이지(조회)
- 즐겨찾기 삭제(삭제)
- Mock Controller를 통한 테스트 구현

### **단위 테스트 작성**

- 즐겨찾기 컨트롤러(컨트롤러)에 대한 테스트 코드 구현
- 즐겨찾기 서비스(서비스)에 대한 테스트 코드 구현
- 즐겨찾기 엔티티 클래스(도메인)에 대한 테스트 코드 구현
- Mock Controller 대신 실제 컨트롤러-서비스-도메인을 통해 테스트 코드 통과

### **문서화 테스트 코드 작성**

- 컨트롤러에 대하여, Mock 테스트 작성
- 테스트 코드를 통해 문서 자동화 수행

### **프론트엔드 연동**

- 이벤트 리스너 및 api 코드 확인
- 잘못된 입력에 대한 검증을 수행하지 않음
    - 서버에서 예외 발생시 이에 대한 처리만 수행
- 쿠키를 통해 JWT 관리

### **사이드 케이스 관리**

- 예외에 대한 테스트 코드 추가
- 회원 탈퇴 시 그 회원의 즐겨찾기가 삭제되는가?
- 즐겨찾기에 저장된 역이 삭제될 경우 즐겨찾기도 삭제되는가?
    - 혹은, 별도의 안전장치가 있는가? (예시 : soft delete)
- 중복에 대해 검증이 가능한가?
    - 같은 유저가 같은 출발/도착역을 추가할 경우
    - 백엔드에서 검증 담당하여 예외 발생
- 예외를 프론트에 전달, alert 발생
    - 예외 메세지를 직접 전달하는 대신, 예외 코드를 전달하자!
    - 다국어화에 대한 이슈도 고려해 보자!!